function recalcParallax(e,t){var o=$(window).scrollTop();for(i=0;i<t.length-1;i++){var a=t[i].split(":"),n=a[0],s=a[1];s.indexOf("px")>0?(s=s.replace("px","")*o+"px",e.css(n,s)):(s*=o,"opacity"===n&&s>=1&&(s=1),"opacity"===n&&s<=0&&(s=0),e.css(n,s))}}function retestVisibility(e){var t=e.attr("data-visible").split("--"),o=$(t[0]),a=t[0].replace(".","")+"--"+t[1],i=t.length>2&&t[0].replace(".","")+"--"+t[2],n=e.visible();n&&!o.hasClass(a)?(o.addClass(a),i&&o.removeClass(i)):!n&&o.hasClass(a)?(o.removeClass(a),i&&o.addClass(i)):!i||n||o.hasClass(i)||o.removeClass(a).addClass(i)}function resizeImage(e,t){if(void 0!==e.attr("src")){var o=new Image;o.onload=function(){var a=o.width/o.height,i=t.width()+10,n=t.height()+10;o=null,parseInt(i/a)<n?e.css({width:parseInt(n*a)+"px",height:parseInt(n)+"px",opacity:1,position:"absolute",top:"50%",left:"50%","margin-top":"-"+parseInt(n/2)+"px","margin-left":"-"+parseInt(n*a/2)+"px"}):e.css({width:parseInt(i)+"px",height:parseInt(i/a)+"px",opacity:1,position:"absolute",top:"50%",left:"50%","margin-top":"-"+parseInt(i/a/2)+"px","margin-left":"-"+parseInt(i/2)+"px"})},o.src=e.attr("src")}}$.fn.extend({visible:function(e){var t=$(window).scrollTop(),o=t+$(window).height(),a=$(this).offset().top,i=a+$(this).outerHeight();return o>=a&&i>=t}}),function(e){var t,o,a=e.event;t=a.special.debouncedresize={setup:function(){e(this).on("resize",t.handler)},teardown:function(){e(this).off("resize",t.handler)},handler:function(e,i){var n=this,s=arguments,r=function(){e.type="debouncedresize",a.dispatch.apply(n,s)};o&&clearTimeout(o),i?r():o=setTimeout(r,t.threshold)},threshold:150}}(jQuery),$(window).on("load debouncedresize scroll",(function(e){$("*[data-parallax]").each((function(){recalcParallax($(this),$(this).attr("data-parallax").split(";"))})),$("*[data-visible]").each((function(){retestVisibility($(this))}))})),$(document).on("load","img[data-fill]",(function(e){resizeImage($(this),$($(this).attr("data-fill")))})),$(window).on("load resize",(function(e){$("img[data-fill]").each((function(){resizeImage($(this),$($(this).attr("data-fill"))),$(document).off("load",$(this))}))}));var $viewport=$("html, body");$viewport.on("scroll mousedown DOMMouseScroll mousewheel keyup",(function(e){(e.which>0||"mousedown"===e.type||"mousewheel"===e.type)&&$viewport.stop()})),$("a[data-scroll]").on("click",(function(e){e.preventDefault();var t=$(this),o=($(t.attr("data-scroll")).length>0?$(t.attr("data-scroll")):$("a[name="+t.attr("data-scroll").replace("#","")+"]")).offset().top,a=o-$(document).scrollTop();a<0&&(a=-a),$viewport.animate({scrollTop:o+"px"},{duration:a})})),$("button[data-toggle]").on("click",(function(e){var t=$(this).attr("data-toggle").split("--");$(t[0]+(t.length>2?"--"+t[1]:"")).toggleClass(t[0].replace(".","")+"--"+t[t.length-1])})),$("button[data-add]").on("click",(function(e){var t=$(this).attr("data-add").split("--");$(t[0]+(t.length>2?"--"+t[1]:"")).addClass(t[0].replace(".","")+"--"+t[t.length-1])})),$("button[data-remove]").on("click",(function(e){var t=$(this).attr("data-remove").split("--");$(t[0]+(t.length>2?"--"+t[1]:"")).removeClass(t[0].replace(".","")+"--"+t[t.length-1])})),$("button[data-tab]").on("click",(function(e){var t=$(this).attr("data-tab").split("--");$(t[0]+"--"+t[1]).hasClass(t[0].replace(".","")+"--"+t[t.length-1])?$(t[0]).removeClass(t[0].replace(".","")+"--"+t[t.length-1]):($(t[0]).removeClass(t[0].replace(".","")+"--"+t[t.length-1]),$(t[0]+"--"+t[1]).addClass(t[0].replace(".","")+"--"+t[t.length-1]))})),$("body").on("click","menu[data-select]>ul",(function(e){e.stopPropagation()})),$("body").on("click","menu[data-select]>div",(function(e){e.stopPropagation();var t=$(this).parent("menu"),o=function(){t.removeClass("ui_select--selected"),$("body").off("click",o)};t.hasClass("ui_select--selected")?o():(t.addClass("ui_select--selected"),$("body").on("click",o))})),addScript=function(e,t){var o,a=document.createElement("script");t&&(a.onload=function(){o||t(),o=!0}),null==document.getElementById(simpleHash(e))?(document.body.appendChild(a),a.setAttribute("src",e),a.setAttribute("id",simpleHash(e))):t&&t()},simpleHash=function(e){for(var t=0,o=0;o<e.length;o++)t+=e.charCodeAt(o)*(o+1+255)+(o+1);return t.toString(16).toUpperCase()},String.prototype.ucwords=function(){return this.replace(/\w\S*/g,(function(e){return e.ucfirst()}))},String.prototype.ucfirst=function(){return this.charAt(0).toUpperCase()+this.substr(1).toLowerCase()},lightOrDark=function(e){if("string"==typeof e&&e.match(/^#/))e=hexToRgb(e);else if("string"==typeof e&&e.match(/^rgb/)){var t=/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/i.exec(e);e={red:parseInt(t[1]),green:parseInt(t[2]),blue:parseInt(t[3])}}return(299*e.red+587*e.green+114*e.blue)/1e3>180?"light":"dark"},hexToRgb=function(e){e=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(e,t,o,a){return t+t+o+o+a+a}));var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{red:parseInt(t[1],16),green:parseInt(t[2],16),blue:parseInt(t[3],16)}:null},mt=function(e,t,o,a){var i="mailto:"+e+"@"+t;o&&(i+="?subject="+o),(a=a.replace(/<br>/g,"%0A"))&&(i+=o?"&":"?",i+="body="+a),location.href=i},getDayName=function(e,t){return t?["","Mon","Tue","Wed","Thu","Fri","Sat","Sun"][e]:["","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"][e]},Number.prototype.padding=function(e){for(var t=String(this);t.length<(e||2);)t="0"+t;return t},Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),o=t.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var a=arguments[1],i=0;i<o;){var n=t[i];if(e.call(a,n,i,t))return i;i++}return-1},configurable:!0,writable:!0});var DateDiff={inDays:function(e,t){var o=e.getTime(),a=t.getTime();return parseInt((a-o)/864e5)},inWeeks:function(e,t){var o=e.getTime(),a=t.getTime();return parseInt((a-o)/6048e5)},inMonths:function(e,t){var o=e.getFullYear(),a=t.getFullYear(),i=e.getMonth();return t.getMonth()+12*a-(i+12*o)},inYears:function(e,t){return t.getFullYear()-e.getFullYear()}};function printElement(e,t){var o="";o="string"==typeof e?e:$(e).clone()[0].outerHTML;var a="function"==typeof window.onafterprint||"object"==typeof window.onafterprint,i=!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform);if(a||i)$("#print_me").length<1&&$("body").append('<div id="print_me"></div>'),$("#print_me").append(o),$("body").addClass("printing"),window.print(),i&&setTimeout((function(){printElementAfter()}),1e3);else{var n=window.open();n.document.write('<html><head><title>Printing</title><link rel="stylesheet" href="'+t+'"></head><body class="printing"><div id="print_me">'+o+"</div></body>"),n.print(),setTimeout((function(){n.close()}),300)}}function printElementAfter(){$("body").removeClass("printing"),$("#print_me").empty()}function loadJSFile(e,t){var o,a;if(e)for(Array.isArray(e)||(e=[e]),o=0;o<e.length;o++){if(a=e[o],loadedJS[a])return;if(document.querySelectorAll('script[src*="'+a.replace(/\?.*?$/,"")+'"]').length>0)return void(loadedJS[a]=!0);var i=document.createElement("script");i.setAttribute("src",a),t&&(i.onload=function(){t()}),document.getElementsByTagName("head")[0].appendChild(i),loadedJS[a]=!0}}function loadCSSFile(e){var t,o;if(e)for(Array.isArray(e)||(e=[e]),t=0;t<e.length;t++){if(o=e[t],loadedCSS[o])return;var a=document.createElement("link");a.setAttribute("rel","stylesheet"),a.setAttribute("href",o),document.getElementsByTagName("head")[0].appendChild(a),loadedCSS[o]=!0}}"function"!=typeof window.onafterprint&&"object"!=typeof window.onafterprint||window.addEventListener("afterprint",printElementAfter);var objYoutubeApi,objYoutubeApiMap,strYouTubeIframeAPI="https://www.youtube.com/iframe_api",strVimeoPlayerAPI="https://player.vimeo.com/api/player.js";function onYouTubeMasonAPIReady(){setTimeout((function(){void 0===loadedJS[strYouTubeIframeAPI]?loadJSFile(strYouTubeIframeAPI,(function(){YT.ready((function(){onYouTubeMasonAPIReadyRun()}))})):onYouTubeMasonAPIReadyRun()}),1)}function onYouTubeMasonAPIReadyRun(){objYoutubeApi={items:[],onReady:function(){},onStateChange:function(e,t){if(1===e.data)for(var o=0;o<objYoutubeApi.items.length;o++)objYoutubeApi.items[o].youtube.pauseVideo&&t.videoID!==objYoutubeApi.items[o].videoID&&objYoutubeApi.items[o].youtube.pauseVideo()},onPageChange:function(){}},objYoutubeApiMap={};for(var e=[],t=0;t<objYoutubeApi.items.length;t++)$("#"+objYoutubeApi.items[t].id).length>0?e.push(objYoutubeApi.items[t]):delete objYoutubeApiMap[objYoutubeApi.items[t].id];function o(e,t){var o=objYoutubeApi.items[objYoutubeApiMap[e]];o.loaded?o.youtube.playVideo():o.youtube=new YT.Player(e,{videoId:o.videoID,playerVars:{autoplay:t?1:0,allow:"autoplay; encrypted-media",allowfullscreen:1,showinfo:0,modestbranding:1,rel:0},events:{onReady:function(e){o.loaded=!0,objYoutubeApi.onReady(e,o)},onStateChange:function(e){objYoutubeApi.onStateChange(e,o)}}})}objYoutubeApi.items=e,$("*[data-youtube-pagination]").off("click").on("click",(function(e){e.preventDefault();var t=$("#"+$(this).attr("data-youtube-id")+"-button-prev"),o=$("#"+$(this).attr("data-youtube-id")+"-button-next"),a=$("#"+$(this).attr("data-youtube-id")+"-dummy"),i=$("#"+$(this).attr("data-youtube-id")+"-list"),n=a.data();i.html('<p style="text-align:center;">Loading</p>'),t.css("display","none"),o.css("display","none"),$.get("/_includes/code/scripts/get_youtube.asp",{elementID:$(this).attr("data-youtube-id"),type:n.type,api:n.api,page:$(this).attr("data-youtube-pagination"),channelid:n.channelid,playlistid:n.playlistid,order:n.order,limit:n.limit,sortlogic:n.sortlogic,order:n.order,orderdirection:n.orderdirection},(function(e){"string"==typeof e&&(e=JSON.parse(e));for(var n="",s=0;s<e.length;s++){for(var r=a.html(),l=Object.keys(e[s]),d=0;d<l.length;d++){var u="{"+l[d]+"}",c=new RegExp(u,"g");r=r.replace(c,e[s][l[d]]),u="{"+l[d]+":safe}",c=new RegExp(u,"g"),r=r.replace(c,String(e[s][l[d]]).replace(/\"/g,'"'))}n+=r=r.replace(/\{item_youtube_id\}/g,e[s].item_youtube_id)}i.html(n),e[0].item_prev_button&&t.after(e[0].item_prev_button).remove(),e[0].item_next_button&&o.after(e[0].item_next_button).remove(),onYouTubeMasonAPIReadyRun()}))})),function e(t){t.each((function(){var t=$(this),a=t.find("*[data-video]"),i="true"===t.attr("data-youtube-lazy");t.find("*[data-youtube-iframe]").each((function(){var t=$(this),a=t.find(".youtube_no_cookie");if(!objYoutubeApiMap[t.attr("id")]){objYoutubeApiMap[t.attr("id")]=objYoutubeApi.items.length;var n={id:t.attr("id"),videoID:t.attr("data-youtube-iframe"),loaded:!1,youtube:{playVideo:function(){o(t.attr("id"),i)}},forceLoad:function(){o(t.attr("id"),i)}};objYoutubeApi.items.push(n)}i||objYoutubeApi.items[objYoutubeApiMap[t.attr("id")]].loaded||(a.length>0&&!$.cookie.allowed()?a.addClass("active").find(".youtube_no_cookie_button").on("click",(function(t){t.preventDefault(),$(".youtube_no_cookie").remove(),e($('*[data-youtube-lazy="false"]'))})):($(".youtube_no_cookie").remove(),o(t.attr("id"),i)))})),i&&(t.find(".youtube_no_cookie").hide(),a.on("click",(function(e){e.preventDefault();var a=$(this),n=t.find("#"+$(this).attr("data-video")),s=t.find(".youtube_no_cookie");n.length>0&&(s.length>0&&!$.cookie.allowed()?s.show().addClass("active").find(".youtube_no_cookie_button").on("click",(function(e){e.preventDefault(),$(".youtube_no_cookie").remove(),o($("#"+a.attr("data-video")).attr("id"),i)})):($(".youtube_no_cookie").remove(),o($("#"+a.attr("data-video")).attr("id"),i)))})))}))}($("*[data-youtube-lazy]"))}var masonVideos={mason:document.querySelector(".mason"),arrVideos:[],blnResizeObs:"ResizeObserver"in window,blnIntersectObs:"IntersectionObserver"in window,initYTPlayers:function(e,t){0==$('script[src="'+strYouTubeIframeAPI+'"]').length&&loadJSFile(strYouTubeIframeAPI);var o=setInterval((function(){"object"==typeof YT&&1==YT.loaded&&setTimeout((function(){clearInterval(o),function(e){var o=masonVideos.formatYouTubeURL(e.opts.source),a={color:"white",playlist:o,modestbranding:1,rel:0};e.opts.autoplay=e.opts.autoplay?1:0,e.opts.controls=e.opts.controls?1:0,e.opts.loop=e.opts.loop?1:0,e.opts.mute=e.opts.mute?1:0,e.opts={...e.opts,...a},e.element.insertAdjacentHTML("beforeend","<div id='ytplayer_"+e.id+"'></div>"),e.player=new YT.Player("ytplayer_"+e.id,{videoId:o,height:"100%",width:"100%",playerVars:e.opts,events:{onReady:function(o){t({state:"ready",video:e}),masonVideos.setVideoVisibility(e)},onStateChange:function(o){o.data==YT.PlayerState.ENDED&&t({state:"end",video:e})}}}),masonVideos.setVideoFill(e),masonVideos.setVideoCustomControls(e),masonVideos.arrVideos.push(e)}(e)}),0)}),50)},formatYouTubeURL:function(e){var t=e.match(/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#\&\?]*).*/);return t=!(!t||11!=t[7].length)&&t[7]},initVimeoPlayers:function(e,t){0==$('script[src="'+strVimeoPlayerAPI+'"]').length&&loadJSFile(strVimeoPlayerAPI);var o=setInterval((function(){"object"==typeof Vimeo&&setTimeout((function(){clearInterval(o),function(e){var o={byline:!1,playsinline:e.opts.mute,portrait:!1,title:!1};e.opts.url=e.opts.source,e.opts.muted=e.opts.mute,e.opts={...e.opts,...o},e.element.setAttribute("id","vimeoplayer_"+e.id),e.player=new Vimeo.Player("vimeoplayer_"+e.id,e.opts),e.opts.mute&&e.player.setVolume(0),e.player.on("loaded",(function(){t({state:"ready",video:e})})),e.player.on("ended",(function(){t({state:"end",video:e})})),masonVideos.setVideoFill(e),masonVideos.setVideoCustomControls(e),masonVideos.setVideoVisibility(e),masonVideos.arrVideos.push(e)}(e)}),0)}),50)},initFilePlayers:function(e,t){e.element.insertAdjacentHTML("beforeend","<video "+(e.opts.controls?"controls":"")+" "+(e.opts.autoplay?"autoplay":"")+" "+(e.opts.loop?"loop":"")+" "+(e.opts.mute?"muted":"")+'><source src="'+e.opts.source+'">Your browser does not support the video tag.</video>'),e.player=e.element.childNodes[0],e.player.onloadstart=function(o){t({state:"ready",video:e})},e.player.onended=function(o){t({state:"end",video:e})},masonVideos.setVideoFill(e),masonVideos.setVideoCustomControls(e),masonVideos.setVideoVisibility(e),masonVideos.arrVideos.push(e)},setVideoVisibility:function(e){masonVideos.blnIntersectObs&&e.opts.visibility&&e.opts.autoplay&&new IntersectionObserver((function(t){switch(e.type){case"youtube":if(e.player.isMuted()){var o=e.player.getPlayerState();2==o?t[0].isIntersecting&&e.player.playVideo():1==o&&!t[0].isIntersecting&&e.player.pauseVideo()}break;case"vimeo":e.player.getVolume().then((function(o){0==o&&e.player.getPaused().then((function(o){o?t[0].isIntersecting&&e.player.play():!t[0].isIntersecting&&e.player.pause()}))}));break;case"native":e.player.muted&&(e.player.paused?t[0].isIntersecting&&e.player.play():!t[0].isIntersecting&&e.player.pause());break}}),{rootMargin:"0px 0px 0px 0px"}).observe(e.element)},setVideoFill:function(e){if(null!=e.opts.videofill){var t=document.querySelector(e.opts.videofill);if(null!=t){if(masonVideos.blnResizeObs)new ResizeObserver((function(e){o()})).observe(t);o(),window.addEventListener("resize",(function(){o()}))}function o(){var o,a,i=16/9,n=t.clientWidth,s=t.clientHeight;n/i<s?(o=Math.ceil(s*i),e.element.style.width=o+"px",e.element.style.height=s+"px"):(a=Math.ceil(n/i),e.element.style.width=n+"px",e.element.style.height=a+"px"),e.element.style.position="absolute",e.element.style.top="50%",e.element.style.left="50%",e.element.style.bottom="auto",e.element.style.right="auto",e.element.style.transform="translate(-50%, -50%)"}}},setVideoCustomControls:function(e){var t=document.querySelector('[data-mason-video-playback="'+e.id+'"]');null!=t&&(t.addEventListener("click",masonVideos.videoPlayback),e.opts.autoplay?t.classList.remove("active"):t.classList.add("active"),e.customControls.playback=t);var o=document.querySelector('[data-mason-video-audio="'+e.id+'"]');null!=o&&(o.addEventListener("click",masonVideos.videoAudio),e.opts.mute?o.classList.remove("active"):o.classList.add("active"),e.customControls.audio=o);var a=document.querySelector('[data-mason-video-popout="'+e.id+'"]');null!=a&&(a.addEventListener("click",masonVideos.videoPopoutOpen),a.classList.remove("active"),e.customControls.popout=a)},videoAudio:function(){var e=this.getAttribute("data-mason-video-audio");masonVideos.arrVideos.forEach((function(t){if(e==t.id){var o,a=t.element.offsetParent?t.element.offsetParent:t.element.parentNode;switch(t.type){case"vimeo":t.player.getVolume().then((function(e){0==e?(t.player.setVolume(1),t.customControls.audio.classList.add("active"),a.classList.add("unmuted")):(t.player.setVolume(0),t.customControls.audio.classList.remove("active"),a.classList.remove("unmuted"))}));break;case"youtube":(o=t.player.isMuted())?(t.player.unMute(),a.classList.add("unmuted")):(t.player.mute(),a.classList.remove("unmuted"));break;case"native":(o=t.player.muted)?a.classList.add("unmuted"):a.classList.remove("unmuted"),t.player.muted=!o;break}null!=o&&(o?t.customControls.audio.classList.add("active"):t.customControls.audio.classList.remove("active"))}}))},videoPlayback:function(){var e=this.getAttribute("data-mason-video-playback");masonVideos.arrVideos.forEach((function(t){if(e==t.id){var o=t.element.offsetParent?t.element.offsetParent:t.element.parentNode;switch(t.type){case"vimeo":t.player.getPaused().then((function(e){e?(t.player.play(),o.classList.add("playing")):(t.player.pause(),o.classList.remove("playing"))}));break;case"youtube":t.player.pauseVideo();var a=t.player.getPlayerState();2==a||5==a?(t.player.playVideo(),o.classList.add("playing")):(t.player.pauseVideo(),o.classList.remove("playing"));break;case"native":t.player.paused?(t.player.play(),o.classList.add("playing")):(t.player.pause(),o.classList.remove("playing"));break}t.customControls.playback.classList.toggle("active")}}))},videoPopoutOpen:function(){var e=this.getAttribute("data-mason-video-popout");masonVideos.arrVideos.forEach((function(t){if(e==t.id){var o=$("<div>",{id:"mason-video-popout"}),a=$("<div>",{id:"mason-video-popout-player","data-mason-video":JSON.stringify({source:t.opts.source,autoplay:!0,mute:!1,controls:!0})}),i=$("<div>",{id:"mason-video-popout-close"}),n=!1;o.append(a).append(i).appendTo(".mason"),o.on("mousemove",(function(e){if(e.target==this){!n&&(n=!0);e.clientX,e.clientY;i[0].style.opacity=1,i[0].style.transform=`translate3d(calc(${e.clientX}px - 50%), calc(${e.clientY}px - 50%), 0)`,$(this).on("click",(function(){i.addClass("clicked"),masonVideos.videoPopoutClose(t,o)}))}else n&&(n=!1)})),masonVideos.loadPlayers("#mason-video-popout-player",(e=>{switch(e.state){case"ready":switch(masonVideos.mason.classList.add("mason--video-popout"),t.type){case"vimeo":case"native":t.player.pause();break;case"youtube":t.player.pauseVideo();break}break;case"end":masonVideos.videoPopoutClose(t,o);break}}))}else{switch(t.type){case"vimeo":t.player.setVolume(0);break;case"youtube":t.player.mute();break;case"native":t.player.muted=!0;break}t.customControls.audio&&t.customControls.audio.classList.remove("active")}}))},videoPopoutClose:function(e,t){masonVideos.mason.classList.remove("mason--video-popout"),t.fadeOut((function(){if(t.remove(),1==e.opts.autoplay)switch(e.type){case"vimeo":case"native":e.player.play();break;case"youtube":e.player.playVideo();break}masonVideos.arrVideos.pop()}))},loadPlayers:function(e,t){for(var o=document.querySelectorAll(e),a=o.length,i=["mov","mpg","avi","mp4","wmv","mpeg","webm","ogg"],n=0;n<a;n++)if(!o[n].children.length){var s=o[n].getAttribute("data-mason-video"),r=JSON.parse(s),l={id:o[n].getAttribute("data-mason-id"),element:o[n],opts:r,customControls:{}};if(l.opts.visibility=l.opts.visibility||!0,r.source.indexOf("youtu")>-1)l.type="youtube",masonVideos.initYTPlayers(l,(function(e){t(e)}));else if(r.source.indexOf("vimeo")>-1)l.type="vimeo",masonVideos.initVimeoPlayers(l,(function(e){t(e)}));else{var d=new RegExp(".[0-9a-z]+$"),u=[];""!=r.source&&(u=r.source.match(d)).length&&i.includes(u[0].replace(".",""))&&(l.type="native",masonVideos.initFilePlayers(l,(function(e){t(e)})))}}},init:function(){masonVideos.loadPlayers("[data-mason-video]",(e=>{if("ready"==e.state)for(key in e.video.customControls)e.video.customControls[key].classList.add("ready")}))}};function fnEnhancedPopup(){}fnEnhancedPopup.prototype={constructor:fnEnhancedPopup,container:null,ctrlPrev:null,ctrlNext:null,ctrlPager:null,ctrlClose:null,intCount:0,blnPreview:!1,_:null,init:function(){_=this,_.container=document.querySelector(".enhanced__pop__container__cycle"),_.ctrlPrev=document.getElementsByClassName("enhanced__pop__btn--prev")[0],_.ctrlNext=document.getElementsByClassName("enhanced__pop__btn--next")[0],_.ctrlPager=document.getElementsByClassName("enhanced__pop__pager")[0],_.ctrlClose=document.getElementsByClassName("enhanced__pop__container__btn__close"),_.intCount=_.container.childElementCount,_.blnPreview="true"==_.container.getAttribute("data-preview"),_.intCount>0&&(_.buildPopPager(_.intCount),_.ctrlPager.addEventListener("click",(e=>{if("SPAN"==e.target.tagName&&!e.target.classList.contains("active")){let t=e.target,o=t.getAttribute("data-count");_.setActiveItem(void 0,_.container.childNodes.item(o)),_.ctrlPager.querySelector(".active").classList.remove("active"),t.classList.add("active")}}))),_.ctrlNext.addEventListener("click",(()=>{_.setActiveItem(!0)})),_.ctrlPrev.addEventListener("click",(()=>{_.setActiveItem(!1)})),Array.from(_.ctrlClose).forEach((function(e){e.addEventListener("click",_.closePopup)})),document.addEventListener("keydown",(function(e){switch(e.which){case 27:_.closePopup();break;case 37:_.setActiveItem(!1);break;case 39:_.setActiveItem(!0);break;default:return}e.preventDefault()})),_.checkNext(_.container.querySelector(".active")),_.container.classList.add("loaded")},buildPopPager:function(e){for(var t=0;t<e;t++){let e=document.createElement("span");e.dataset.count=t,0==t&&e.classList.add("active"),_.ctrlPager.append(e)}_.ctrlPager.classList.add("loaded")},checkNext:function(e){_.loadActiveImage(e),null==e.nextElementSibling?_.ctrlNext.disabled=!0:_.ctrlNext.disabled=!1,null==e.previousElementSibling?_.ctrlPrev.disabled=!0:_.ctrlPrev.disabled=!1},setPagerActive:function(e){_.ctrlPager.querySelector(".active").classList.remove("active"),_.ctrlPager.childNodes.item(e).classList.add("active")},setActiveItem:function(e,t){let o,a;if(!0===e?(o=_.container.querySelector(".active"),a=o.nextElementSibling):!1===e?(o=_.container.querySelector(".active"),a=o.previousElementSibling):t&&(o=_.container.querySelector(".active"),a=t),null!=a&&(o.classList.remove("active"),a.classList.add("active"),_.checkNext(a),null==t&&_.intCount>0)){let e=Array.from(a.parentNode.children).indexOf(a);_.setPagerActive(e)}},loadActiveImage:function(e){let t=e.querySelector("[data-img]");if(null!==t&&!t.classList.contains("lazy--prep")){t.classList.add("lazy--prep");let e=t.querySelector(".lazy__load__img");null==e&&(e=document.createElement("div"),e.className="lazy__load__img",t.appendChild(e));let o=t.getAttribute("data-img"),a=new Image;a.src=o,t.hasAttribute("data-alt")?a.alt=t.getAttribute("data-alt"):a.alt="",a.onload=()=>{t.hasAttribute("data-bg")?e.style.backgroundImage="url("+o+")":e.appendChild(a),setTimeout((function(){t.classList.add("lazy--loaded")}),300)},a.onerror=()=>{let o=strFallbackPath||"/_site/images/design/thumbnail.jpg";t.hasAttribute("data-bg")?e.style.backgroundImage="url("+o+")":(a.src=o,e.appendChild(a)),setTimeout((function(){t.classList.add("lazy--loaded")}),300)}}},closePopup:function(){document.getElementsByClassName("enhanced__pop__container")[0].classList.add("enhanced__pop__container--close"),_.blnPreview&&($("#admin_dialog").show(),setTimeout((function(){$('.enhanced__pop__container, script#enhanced_popup_script, link[href*="enhanced-popup.css"]').remove()}),400))}},$((function(){document.querySelector(".enhanced__pop__container__cycle")&&(new fnEnhancedPopup).init()}));